(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],[,,,,,,function(e,t,a){e.exports={searchbar:"Searchbar_searchbar__3LNNx",searchForm:"Searchbar_searchForm__1e16I",searchForm_button:"Searchbar_searchForm_button__2dy57",searchForm_button_label:"Searchbar_searchForm_button_label__qeeRj",searchForm_input:"Searchbar_searchForm_input__mWhEj"}},function(e,t,a){e.exports={imageGallery:"ImageGallery_imageGallery__mDwFZ",galleryContainer:"ImageGallery_galleryContainer__2uY9K",btnContainer:"ImageGallery_btnContainer__1rMs2",hidden:"ImageGallery_hidden__1n51q",button:"ImageGallery_button__2a-P-"}},,function(e,t,a){e.exports={imageGalleryItem:"GalleryItem_imageGalleryItem__bSX3s",imageGalleryItem_image:"GalleryItem_imageGalleryItem_image__J_t6A"}},function(e,t,a){e.exports={spinContainer:"Loader_spinContainer__2kqmd",spinner:"Loader_spinner__3dQA6"}},function(e,t,a){e.exports={overlay:"Modal_overlay__B1Xay",modal:"Modal_modal__35upx"}},,,,,,,,function(e,t,a){},,function(e,t,a){"use strict";a.r(t);var r=a(1),n=a.n(r),s=a(13),o=a.n(s),c=(a(19),a(2)),i=a(3),l=a(5),u=a(4),m=a(6),h=a.n(m),d=a(0),b=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).handleQueryChange=function(t){e.setState({query:t.currentTarget.value.toLowerCase()})},e.onHandleSubmit=function(t){t.preventDefault(),""!==e.state.query.trim()?(e.props.submit(e.state.query),e.setState({query:""})):alert("No query entered")},e.state={query:""},e}return Object(i.a)(a,[{key:"render",value:function(){return Object(d.jsx)("header",{className:h.a.searchbar,children:Object(d.jsxs)("form",{className:h.a.searchForm,onSubmit:this.onHandleSubmit,children:[Object(d.jsx)("button",{type:"submit",className:h.a.searchForm_button,children:Object(d.jsx)("span",{className:h.a.searchForm_button_label,children:"Search"})}),Object(d.jsx)("input",{className:h.a.searchForm_input,type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",onChange:this.handleQueryChange,value:this.state.query})]})})}}]),a}(n.a.Component),j=a(12),p=a(9),g=a.n(p);function y(e){var t=e.id,a=e.alt,r=e.webformatURL,n=e.largeImageURL,s=e.click;return Object(d.jsx)("li",{className:g.a.imageGalleryItem,children:Object(d.jsx)("img",{src:r,alt:a,onClick:function(){s(n,a)},className:g.a.imageGalleryItem_image})},t)}function _(e){var t=e.btnName,a=e.className,r=e.onClick;return Object(d.jsx)("button",{type:"submit",className:a,onClick:r,children:t})}var f=a(14),O=a(10),v=a.n(O);function x(){return Object(d.jsx)("div",{className:v.a.spinContainer,children:Object(d.jsx)(f.a,{className:v.a.spinner,size:"80"})})}var k=a(11),C=a.n(k),I=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).keydownHandler=function(t){"Escape"===t.code&&e.props.close()},e.onBackdropCloseClick=function(t){t.currentTarget===t.target&&e.props.close()},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.keydownHandler)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.keydownHandler)}},{key:"render",value:function(){return Object(d.jsx)("div",{className:C.a.overlay,onClick:this.onBackdropCloseClick,children:Object(d.jsx)("div",{className:C.a.modal,children:Object(d.jsx)("img",{src:this.props.largeImageURL,alt:this.props.alt})})})}}]),a}(n.a.Component);function S(e,t){var a="https://pixabay.com/api/?q=".concat(e,"&page=").concat(t,"&key=").concat("22456437-7bc40aa948e36a9aa215a1147","&image_type=photo&orientation=horizontal&per_page=12");return fetch(a).then((function(e){return e.ok?e.json():Promise.reject(new Error("Something gone wrong"))}))}var w=a(7),N=a.n(w),q=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).loadMoreHandler=function(t){S(e.props.query,e.state.page+1).then((function(t){return e.setState((function(e){return{gallery:[].concat(Object(j.a)(e.gallery),Object(j.a)(t.hits)),page:e.page+1}}))})).then((function(){return window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})}))},e.openModalHandler=function(t,a){e.setState({largeImageURL:t,alt:a})},e.closeModalHandler=function(){e.setState({largeImageURL:"",alt:""})},e.state={status:"idle",page:1,gallery:null},e}return Object(i.a)(a,[{key:"componentDidUpdate",value:function(e,t){var a=this;e.query!==this.props.query&&(this.setState({status:"pending"}),S(this.props.query).then((function(e){return 0===e.total?a.setState({error:"Image(s) not found",status:"rejected"}):a.setState({gallery:e.hits,status:"resolved",page:1})})).catch((function(e){return a.setState({error:e,status:"rejected"})})))}},{key:"render",value:function(){var e=this;return"idle"===this.state.status?Object(d.jsx)(_,{className:N.a.hidden}):"pending"===this.state.status?Object(d.jsx)(x,{}):"rejected"===this.state.status?Object(d.jsx)("p",{children:this.state.error}):"resolved"===this.state.status?Object(d.jsxs)("div",{className:N.a.galleryContainer,children:[Object(d.jsx)("ul",{className:N.a.imageGallery,children:this.state.gallery.map((function(t){return Object(d.jsx)(y,{alt:t.tags,webformatURL:t.webformatURL,largeImageURL:t.largeImageURL,click:e.openModalHandler},t.id)}))}),Object(d.jsx)("div",{className:N.a.btnContainer,children:Object(d.jsx)(_,{className:N.a.button,btnName:"Load more",onClick:this.loadMoreHandler})}),this.state.largeImageURL&&Object(d.jsx)(I,{close:this.closeModalHandler,largeImageURL:this.state.largeImageURL,alt:this.state.alt})]}):void 0}}]),a}(n.a.Component),L=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).handleFormSubmit=function(t){e.setState({query:t})},e.state={query:""},e}return Object(i.a)(a,[{key:"render",value:function(){return Object(d.jsxs)("div",{children:[Object(d.jsx)(b,{submit:this.handleFormSubmit}),Object(d.jsx)(q,{query:this.state.query})]})}}]),a}(n.a.Component);o.a.render(Object(d.jsx)(n.a.StrictMode,{children:Object(d.jsx)(L,{})}),document.getElementById("root"))}],[[21,1,2]]]);
//# sourceMappingURL=main.a00bf13f.chunk.js.map